<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
    <head>
        <title></title>
        <script src="../libraries/yui/yahoo-dom-event/yahoo-dom-event.js" type="text/javascript"></script>
        <script src="../libraries/yui/YUI3.js" type="text/javascript"></script>
        <script src="../utilities/util.js" type="text/javascript"></script>
        <script src="../utilities/util_dom.js" type="text/javascript"></script>
        <script src="../utilities/util_array.js" type="text/javascript"></script>
        <script src="../utilities/util_structs.js" type="text/javascript"></script>
        <script src="tds_acc.js" type="text/javascript"></script>
        <script src="tds_acc_type.js" type="text/javascript"></script>
        <script src="tds_acc_value.js" type="text/javascript"></script>
        <script src="tds_acc_renderer.js" type="text/javascript"></script>
        <script src="tds_acc_props.js" type="text/javascript"></script>
    </head>
    
    <body>
        
        <div>
            <a href="javascript:accRenderer.render(); void(0);">Render from model</a> |
            <a href="javascript:accRenderer.save(); void(0);">Save to model</a> | 
            <a href="javascript:Util.dir(accommodations.exportJson()); void(0);">Dump JSON</a>
        </div>
        
        <br />
        
        <div id="accs"></div>

        <script type="text/javascript">

            var accommodations = new Accommodations();
            var accRenderer = new Accommodations.Renderer(accommodations, 'accs');

            function loadAccommodations()
            {
                // add events
                accommodations.onCreateType.subscribe(function(accType) { Util.log('create type: ' + accType.getName()); });
                accommodations.onRemoveType.subscribe(function(accType) { Util.log('remove type: ' + accType.getName()); });
                accommodations.onCreateValue.subscribe(function(accValue) { Util.log('create value: ' + accValue.getCode()); });
                accommodations.onRemoveValue.subscribe(function(accValue) { Util.log('remove value: ' + accValue.getCode()); });
                accommodations.onUpdateValues.subscribe(function(accType) { Util.log('updated values: ' + accType.getName()); });
                accommodations.onSelectValue.subscribe(function(accValue) { Util.log('select value: ' + accValue.getCode()); });
                accommodations.onDeselectValue.subscribe(function(accValue) { Util.log('deselect value: ' + accValue.getCode()); });

                // load accommodations
                accommodations.importJson(accommodationsJson);

                // add dependency rules
                accommodations.addDependency('Strikethrough', 'TDS_ST1', 'Student Comments', 'TDS_SC0', true);
                accommodations.addDependency('Strikethrough', 'TDS_ST1', 'Student Comments', 'TDS_SC1', false);
                
                // select all the defaults
                accommodations.selectDefaults();
                
                // render HTML
                accRenderer.bind();
                accRenderer.render();
            }

            window.onload = loadAccommodations;
            

            /*

            // unit test:
            Util.logInfo('Unit Test: createType()/createValue()');

            var typeTool1 = accs.createType('Tool 1', 'Tool 1 Label', true, true, true, false);
            typeTool1.createValue('S_0', 'None', null, true, false);
            typeTool1.createValue('S_1&S_2', 'Value 1', null, false, true);
            typeTool1.createValue('S_3&S_4', 'Value 2', null, false, true);
            typeTool1.createValue('S_5', 'Value 3', null, false, true);
            typeTool1.createValue('S_6', 'Value 4', null, false, true);
            typeTool1.createValue('S_7&S_1', 'Value 5', null, false, true);
            typeTool1.createValue('S_8', 'Value 6', null, false, true);
            typeTool1.createValue('S_9', 'Value 7', null, false, true);
            
            
            var typeTool2 = accs.createType('Tool 2', 'Tool 2 Label', true, true, true, false);
            typeTool2.createValue('B_0', 'False', null, true, false);
            typeTool2.createValue('B_1', 'True', null, false, false);

            var typeTool3 = accs.createType('Tool 3', 'Tool 3 Label', true, true, true, false);
            typeTool3.createValue('V_0', 'Value 0', null, true, false, 'Tool 2')
            typeTool3.createValue('V_1', 'Value 1', null, false, true, 'Tool 2');
            typeTool3.createValue('V_2', 'Value 2', null, false, true, 'Tool 2')
            typeTool3.createValue('V_3', 'Value 3', null, false, true, 'Tool 2')

            // add tool dependency
            // RULE : The type 'Tool 2' value is 'B_0'
            accs.addDependency('Tool 2', 'B_0', 'Tool 3', 'V_0', true);
            accs.addDependency('Tool 2', 'B_0', 'Tool 3', 'V_1');
            accs.addDependency('Tool 2', 'B_0', 'Tool 3', 'V_2');
            accs.addDependency('Tool 2', 'B_0', 'Tool 3', 'V_3');

            // RULE : The type 'Tool 2' value is 'B_1'
            accs.addDependency('Tool 2', 'B_1', 'Tool 3', 'V_1', true);
            accs.addDependency('Tool 2', 'B_1', 'Tool 3', 'V_2');
            
            var colorTool = accs.createType('Color', 'Color Tool', true, true, true, false);
            colorTool.createValue('C_0', 'None', 'No Color', true, false);
            colorTool.createValue('C_1', 'Blue', null, false, false);
            colorTool.createValue('C_2', 'Red', null, false, false);

            var accProps = new Accommodations.Properties(accs);

            var types = [
                { name: 'JSON Type 1', label: 'JSON Label 1', isVisible: true, isSelectable: true, allowChange: true, studentControl: true, values:
                [
                    { code: 'J_1_0', name: 'JSON 1-0', label: 'JSON Label 1-0', isDefault: true, allowCombine: false },
                    { code: 'J_1_1', name: 'JSON 1-1', label: 'JSON Label 1-1', isDefault: false, allowCombine: true },
                    { code: 'J_1_2', name: 'JSON 1-2', label: 'JSON Label 1-2', isDefault: false, allowCombine: true }
                ]}
            ];

            // unit test:
            Util.logInfo('Unit Test: importJSON()');
            accs.importJson(types);
            
            // unit test: test events and allowCombine
            Util.logInfo('Unit Test: select()');
            accs.getValue('V_2').select();
            accs.getValue('V_3').select();
            accs.getValue('V_0').select();

            // unit test:
            Util.logInfo('Unit Test: setSelected()');
            accs.getValue('S_1&S_2').select();
            accs.selectCodes('Tool 1', ['S_1&S_2', 'S_5', 'S_8', 'S_999']);

            // unit test:
            Util.logInfo('Unit Test: selectDefaults()');
            accs.selectDefaults();

            // unit test:
            Util.logInfo('Unit Test: dependancies()');
            accs.getValue('B_0').select();
            Util.log('Dependancies test should be 4: ' + typeTool3.getValues().length);
            accs.getValue('B_1').select();
            Util.log('Dependancies test should be 2: ' + typeTool3.getValues().length);
            accs.getValue('B_0').select();
            */
            /*
            // unit test:
            Util.logInfo('Unit Test: selectAll()');
            accs.selectAll();

            // unit test:
            Util.logInfo('Unit Test: exportJson()');
            Util.dir(accs.exportJson(types));

            // unit test:
            Util.logInfo('Unit Test: removeType()');
            accs.removeType('Tool 2')
            */

            /**************************************************************/

            var accs2 = new Accommodations();
            var typeTool3_2 = accs2.createType('Tool 3', 'Tool 3 Label', true, true, true, false);
            typeTool3_2.createValue('V_0', 'Value 0', null, true, false)
            typeTool3_2.createValue('V_1', 'Value 1', null, false, true);
            typeTool3_2.createValue('V_4', 'Value 4', null, false, true)

            var typeTool4 = accs2.createType('Tool 4', 'Tool 4 Label', true, true, true, false);
            typeTool4.createValue('A_0', 'False', null, true, false);
            typeTool4.createValue('A_1', 'True', null, false, false);

            // unit test:
            // Util.logInfo('Unit Test: replace()');
            // accs.replaceWith(accs2);
            // accs.unionWith(accs2);

            /**************************************************************/

        </script>

        <script type="text/javascript">
        
        // Accommodation data:
        
        var accommodationsJson = 
        { types: [ 
          { "allowChange" : true,
            "isSelectable" : true,
            "isVisible" : true,
            "label" : "Calculator",
            "name" : "Calculator",
            "studentControl" : true,
            "values": 
                [ { "allowCombine" : false,
                  "code" : "TDS_CalcBasic",
                  "isDefault" : true,
                  "label" : "Basic",
                  "name" : "Basic"
                },
                { "allowCombine" : false,
                  "code" : "TDS_CalcSci",
                  "isDefault" : true,
                  "label" : "Scientific",
                  "name" : "Scientific"
                },
                { "allowCombine" : false,
                  "code" : "TDS_CalcGraphing",
                  "isDefault" : true,
                  "label" : "Graphing",
                  "name" : "Graphing"
                }
              ]
          },
          { "allowChange" : true,
            "isSelectable" : true,
            "isVisible" : true,
            "label" : "Color Choices",
            "name" : "Color Choices",
            "studentControl" : true,
            "values": 
                [ { "allowCombine" : false,
                  "code" : "TDS_CC0",
                  "isDefault" : true,
                  "label" : "None",
                  "name" : "None"
                },
                { "allowCombine" : false,
                  "code" : "TDS_CCBlue",
                  "isDefault" : false,
                  "label" : "Blue",
                  "name" : "Blue"
                },
                { "allowCombine" : false,
                  "code" : "TDS_CCYellow",
                  "isDefault" : false,
                  "label" : "Yellow",
                  "name" : "Yellow"
                }
              ]
          },
          { "allowChange" : true,
            "isSelectable" : true,
            "isVisible" : true,
            "label" : "Font Size",
            "name" : "Font Size",
            "studentControl" : true,
            "values": 
                [ { "allowCombine" : false,
                  "code" : "TDS_F_S12",
                  "isDefault" : true,
                  "label" : "12pt",
                  "name" : "12pt"
                },
                { "allowCombine" : false,
                  "code" : "TDS_F_S14",
                  "isDefault" : true,
                  "label" : "14pt",
                  "name" : "14pt"
                }
              ]
          },
          { "allowChange" : true,
            "isSelectable" : true,
            "isVisible" : true,
            "label" : "Font Type",
            "name" : "Font Type",
            "studentControl" : true,
            "values": 
                [ { "allowCombine" : false,
                  "code" : "TDS_FT_Serif",
                  "isDefault" : true,
                  "label" : "Serif (Times)",
                  "name" : "Serif (Times)"
                },
                { "allowCombine" : false,
                  "code" : "TDS_FT_San-Serif",
                  "isDefault" : true,
                  "label" : "San-Serif (Arial)",
                  "name" : "San-Serif (Arial)"
                }
              ]
          },
          { "allowChange" : true,
            "isSelectable" : true,
            "isVisible" : true,
            "label" : "Formula",
            "name" : "Formula",
            "studentControl" : true,
            "values": 
                [ { "allowCombine" : false,
                  "code" : "TDS_F_OR3_5",
                  "isDefault" : true,
                  "label" : "OR 3-5 Math",
                  "name" : "OR 3-5 Math"
                },
                { "allowCombine" : false,
                  "code" : "TDS_FOR6_8Math",
                  "isDefault" : true,
                  "label" : "OR 6-8 Math",
                  "name" : "OR 6-8 Math"
                },
                { "allowCombine" : false,
                  "code" : "TDS_F_ORCIM_Math",
                  "isDefault" : true,
                  "label" : "OR CIM Math",
                  "name" : "OR CIM Math"
                }
              ]
          },
          { "allowChange" : true,
            "isSelectable" : true,
            "isVisible" : true,
            "label" : "Guide for Revision",
            "name" : "Guide for Revision",
            "studentControl" : true,
            "values": 
                [ { "allowCombine" : false,
                  "code" : "TDS_GfR0",
                  "isDefault" : true,
                  "label" : "False",
                  "name" : "False"
                },
                { "allowCombine" : false,
                  "code" : "TDS_GfR1",
                  "isDefault" : false,
                  "label" : "True",
                  "name" : "True"
                } ]
          },
          { "allowChange" : true,
            "isSelectable" : true,
            "isVisible" : true,
            "label" : "Highlight",
            "name" : "Highlight",
            "studentControl" : true,
            "values": 
                [ { "allowCombine" : false,
                  "code" : "TDS_Highlight0",
                  "isDefault" : true,
                  "label" : "False",
                  "name" : "False"
                },
                { "allowCombine" : false,
                  "code" : "TDS_Highlight1",
                  "isDefault" : false,
                  "label" : "True",
                  "name" : "True"
                } ]
          },
          { "allowChange" : true,
            "isSelectable" : true,
            "isVisible" : true,
            "label" : "Item Types Exclusion",
            "name" : "Item Types Exclusion",
            "studentControl" : true,
            "values": 
                [ { "allowCombine" : false,
                  "code" : "TDS_ItemTypeExcl_GI",
                  "isDefault" : false,
                  "label" : "Grid Items",
                  "name" : "Grid Items"
                },
                { "allowCombine" : false,
                  "code" : "TDS_ItemTypeExcl_None",
                  "isDefault" : true,
                  "label" : "None",
                  "name" : "None"
                }
              ]
          },
          { "allowChange" : true,
            "isSelectable" : true,
            "isVisible" : true,
            "label" : "Language",
            "name" : "Language",
            "studentControl" : true,
            "values": 
                [ { "allowCombine" : false,
                  "code" : "ENU",
                  "isDefault" : true,
                  "label" : "English",
                  "name" : "English"
                },
                { "allowCombine" : false,
                  "code" : "ESN",
                  "isDefault" : false,
                  "label" : "Spanish",
                  "name" : "Spanish"
                },
                { "allowCombine" : false,
                  "code" : "BRAILLE",
                  "isDefault" : false,
                  "label" : "Braille",
                  "name" : "Braille"
                }
              ]
          },
          { "allowChange" : true,
            "isSelectable" : true,
            "isVisible" : true,
            "label" : "Mark for Review",
            "name" : "Mark for Review",
            "studentControl" : true,
            "values": 
                [ { "allowCombine" : false,
                  "code" : "TDS_MfR0",
                  "isDefault" : true,
                  "label" : "False",
                  "name" : "False"
                },
                { "allowCombine" : false,
                  "code" : "TDS_MfR1",
                  "isDefault" : false,
                  "label" : "True",
                  "name" : "True"
                } ]
          },
          { "allowChange" : true,
            "isSelectable" : true,
            "isVisible" : true,
            "label" : "Periodic Table",
            "name" : "Periodic Table",
            "studentControl" : true,
            "values": 
                [ { "allowCombine" : false,
                  "code" : "TDS_PT_HTML",
                  "isDefault" : true,
                  "label" : "HTML",
                  "name" : "HTML"
                } ]
          },
          { "allowChange" : true,
            "isSelectable" : true,
            "isVisible" : true,
            "label" : "Print on Request",
            "name" : "Print on Request",
            "studentControl" : true,
            "values":
                [                
                { "allowCombine" : false,
                  "code" : "TDS_PoD0",
                  "isDefault" : true,
                  "label" : "None",
                  "name" : "None"
                },
                { "allowCombine" : false,
                  "code" : "TDS_PoD_Item",
                  "isDefault" : false,
                  "label" : "Item",
                  "name" : "Item"
                },
                { "allowCombine" : false,
                  "code" : "TDS_PoD_Stim",
                  "isDefault" : true,
                  "label" : "Passages",
                  "name" : "Passages"
                },
                { "allowCombine" : false,
                  "code" : "TDS_PoD_Stim&TDS_PoD_Item",
                  "isDefault" : false,
                  "label" : "Passages and Items",
                  "name" : "Passages and Items"
                }
              ]
          },
          { "allowChange" : true,
            "isSelectable" : true,
            "isVisible" : true,
            "label" : "Print Size",
            "name" : "Print Size",
            "studentControl" : true,
            "values": 
                [ { "allowCombine" : false,
                  "code" : "TDS_PS_Larger",
                  "isDefault" : false,
                  "label" : "Larger",
                  "name" : "Larger"
                },
                { "allowCombine" : false,
                  "code" : "TDS_PS_Largest",
                  "isDefault" : false,
                  "label" : "Largest",
                  "name" : "Largest"
                },
                { "allowCombine" : false,
                  "code" : "TDS_PS_Normal",
                  "isDefault" : true,
                  "label" : "Normal",
                  "name" : "Normal"
                }
              ]
          },
          { "allowChange" : true,
            "isSelectable" : true,
            "isVisible" : true,
            "label" : "Strikethrough",
            "name" : "Strikethrough",
            "studentControl" : true,
            "values": 
                [ { "allowCombine" : false,
                  "code" : "TDS_ST0",
                  "isDefault" : true,
                  "label" : "False",
                  "name" : "False"
                },
                { "allowCombine" : false,
                  "code" : "TDS_ST1",
                  "isDefault" : false,
                  "label" : "True",
                  "name" : "True"
                } ]
          },
          { "allowChange" : true,
            "isSelectable" : true,
            "isVisible" : true,
            "label" : "Student Comments",
            "name" : "Student Comments",
            "studentControl" : true,
            "values": 
                [ { "allowCombine" : false,
                  "code" : "TDS_SC0",
                  "isDefault" : true,
                  "label" : "False",
                  "name" : "False",
                  "dependsOn" : "Strikethrough"
                },
                { "allowCombine" : false,
                  "code" : "TDS_SC1",
                  "isDefault" : false,
                  "label" : "True",
                  "name" : "True",
                  "dependsOn" : "Strikethrough"
                } ]
          },
          { "allowChange" : true,
            "isSelectable" : true,
            "isVisible" : true,
            "label" : "Tutorial",
            "name" : "Tutorial",
            "studentControl" : true,
            "values": 
                [ { "allowCombine" : false,
                  "code" : "TDS_T0",
                  "isDefault" : true,
                  "label" : "False",
                  "name" : "False"
                },
                { "allowCombine" : false,
                  "code" : "TDS_T1",
                  "isDefault" : false,
                  "label" : "True",
                  "name" : "True"
                } ]
          },
          { "allowChange": true,
            "isSelectable": true,
            "isVisible": true,
            "label": "Scaffolding Voice Guidance",
            "name": "Scaffolding Voice Guidance",
            "studentControl": true,
            "values":
                [ { "allowCombine": false,
                  "code": "TDS_ASIGuide0",
                  "isDefault": false,
                  "label": "False",
                  "name": "False"
                },
                { "allowCombine": false,
                  "code": "TDS_ASIGuide1",
                  "isDefault": true,
                  "label": "True",
                  "name": "True"
                } ]
          },
        { "allowChange" : true,
          "isSelectable" : true,
          "isVisible" : true,
          "label" : "Text to Speech",
          "name" : "TTS",
          "studentControl" : true,
          "values":
            [ 
              { "allowCombine" : false,
                "code" : "TDS_TTS0",
                "isDefault" : true,
                "label" : "No Text to Speech",
                "name" : "None"
              },
              { "allowCombine" : true,
                "code" : "TDS_TTS_Inst",
                "isDefault" : false,
                "label" : "Instructions",
                "name" : "Instruction"
              },
              { "allowCombine" : true,
                "code" : "TDS_TTS_Inst",
                "isDefault" : false,
                "label" : "Instructions",
                "name" : "Instructions"
              },
              { "allowCombine" : true,
                "code" : "TDS_TTS_Item",
                "isDefault" : false,
                "label" : "Items",
                "name" : "Items"
              },
              { "allowCombine" : true,
                "code" : "TDS_TTS_Stim",
                "isDefault" : false,
                "label" : "Passages",
                "name" : "Passages"
              }
            ]
        }],
        dependencies:
        [
        
        ]}
        
        </script>
        
    </body>

</html>
